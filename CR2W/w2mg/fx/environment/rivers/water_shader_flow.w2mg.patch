 1 file changed, 114 insertions(+), 25 deletions(-)

diff --git 1.32/fx/environment/rivers/water_shader_flow.w2mg.txt 4.00/fx/environment/rivers/water_shader_flow.w2mg.txt
index 27f0450..8f5c9d8 100644
--- 1.32/fx/environment/rivers/water_shader_flow.w2mg.txt
+++ 4.00/fx/environment/rivers/water_shader_flow.w2mg.txt
@@ -1,50 +1,134 @@
     CMaterialGraph #0 (CMaterialGraph) : 
         CMaterialGraph (CMaterialGraph)
-            pixelParamBlockSize (Uint32) : 44
+            pixelParamBlockSize (Uint32) : 136
             sortGroup (ERenderingSortGroup) : RSG_WaterBlend
             offset (Vector)
-                X (Float) : 1592.0000
-                Y (Float) : 2967.0000
+                X (Float) : 1609.0000
+                Y (Float) : 1688.0000
                 Z (Float) : 0.0000
                 W (Float) : 1.0000
             pixelParameterBlocks (array:ptr:CMaterialParameter)
-                0 (ptr:CMaterialParameter) : CMaterialParameterTexture #1
-                1 (ptr:CMaterialParameter) : CMaterialParameterVector #2
-                2 (ptr:CMaterialParameter) : CMaterialParameterVector #3
+                0 (ptr:CMaterialParameter) : CMaterialParameterVector #1
+                1 (ptr:CMaterialParameter) : CMaterialParameterTexture #2
+                2 (ptr:CMaterialParameter) : CMaterialParameterScalar #3
                 3 (ptr:CMaterialParameter) : CMaterialParameterScalar #4
+                4 (ptr:CMaterialParameter) : CMaterialParameterVector #5
+                5 (ptr:CMaterialParameter) : CMaterialParameterTexture #6
+                6 (ptr:CMaterialParameter) : CMaterialParameterVector #7
+                7 (ptr:CMaterialParameter) : CMaterialParameterVector #8
+                8 (ptr:CMaterialParameter) : CMaterialParameterTexture #9
+                9 (ptr:CMaterialParameter) : CMaterialParameterTexture #10
+                10 (ptr:CMaterialParameter) : CMaterialParameterVector #11
+                11 (ptr:CMaterialParameter) : CMaterialParameterVector #12
             canOverrideMasked (Bool) : true
             PixelParameters (CBufferVLQInt32:SMaterialGraphParameter)
                 0 (SMaterialGraphParameter)
-                    Type (Uint8) : 1
+                    Type (Uint8) : 4
                     Offset (Uint8) : 0
-                    Name (CName) : flowTexture
+                    Name (CName) : NoiseUV
                 1 (SMaterialGraphParameter)
-                    Type (Uint8) : 4
-                    Offset (Uint8) : 8
-                    Name (CName) : DetailDirection
+                    Type (Uint8) : 1
+                    Offset (Uint8) : 16
+                    Name (CName) : flowTexture
                 2 (SMaterialGraphParameter)
-                    Type (Uint8) : 4
+                    Type (Uint8) : 5
                     Offset (Uint8) : 24
-                    Name (CName) : CoarseDirection
-                3 (SMaterialGraphParameter)
-                    Type (Uint8) : 5
-                    Offset (Uint8) : 40
                     Name (CName) : flowNormalStrength
+                3 (SMaterialGraphParameter)
+                    Type (Uint8) : 5
+                    Offset (Uint8) : 28
+                    Name (CName) : flowNoiselStrength
+                4 (SMaterialGraphParameter)
+                    Type (Uint8) : 4
+                    Offset (Uint8) : 32
+                    Name (CName) : NoiseTextureMaskUV
+                5 (SMaterialGraphParameter)
+                    Type (Uint8) : 1
+                    Offset (Uint8) : 48
+                    Name (CName) : NoiseTextureMask
+                6 (SMaterialGraphParameter)
+                    Type (Uint8) : 4
+                    Offset (Uint8) : 56
+                    Name (CName) : NoiseFlowMapUV
+                7 (SMaterialGraphParameter)
+                    Type (Uint8) : 4
+                    Offset (Uint8) : 72
+                    Name (CName) : NoiseFlowMapMovement
+                8 (SMaterialGraphParameter)
+                    Type (Uint8) : 1
+                    Offset (Uint8) : 88
+                    Name (CName) : NoiseTexture
+                9 (SMaterialGraphParameter)
+                    Type (Uint8) : 1
+                    Offset (Uint8) : 96
+                    Name (CName) : NoiseFlowMap
+                10 (SMaterialGraphParameter)
+                    Type (Uint8) : 4
+                    Offset (Uint8) : 104
+                    Name (CName) : CoarseDirection
+                11 (SMaterialGraphParameter)
+                    Type (Uint8) : 4
+                    Offset (Uint8) : 120
+                    Name (CName) : DetailDirection
             VertexParameters (CBufferVLQInt32:SMaterialGraphParameter) : # CBufferVLQInt32:SMaterialGraphParameter
             Unk1 (Uint32) : 0
-    CMaterialParameterTexture #1 (CMaterialParameterTexture) : flowTexture
+    CMaterialParameterVector #1 (CMaterialParameterVector) : NoiseUV
+        CMaterialParameterVector (CMaterialParameterVector)
+            parameterName (CName) : NoiseUV
+            vector (Vector)
+                X (Float) : 3.0000
+                Y (Float) : 6.0000
+                Z (Float) : 1.0000
+                W (Float) : 2.0000
+    CMaterialParameterTexture #2 (CMaterialParameterTexture) : flowTexture
         CMaterialParameterTexture (CMaterialParameterTexture)
             parameterName (CName) : flowTexture
             texture (handle:ITexture) : fx/environment/rivers/river_current_base.xbm
-    CMaterialParameterVector #2 (CMaterialParameterVector) : DetailDirection
+    CMaterialParameterScalar #3 (CMaterialParameterScalar) : flowNormalStrength
+        CMaterialParameterScalar (CMaterialParameterScalar)
+            parameterName (CName) : flowNormalStrength
+            scalar (Float) : 1.3000
+    CMaterialParameterScalar #4 (CMaterialParameterScalar) : flowNoiselStrength
+        CMaterialParameterScalar (CMaterialParameterScalar)
+            parameterName (CName) : flowNoiselStrength
+            scalar (Float) : 0.9000
+    CMaterialParameterVector #5 (CMaterialParameterVector) : NoiseTextureMaskUV
         CMaterialParameterVector (CMaterialParameterVector)
-            parameterName (CName) : DetailDirection
+            parameterName (CName) : NoiseTextureMaskUV
             vector (Vector)
-                X (Float) : -0.0350
-                Y (Float) : 0.0000
+                X (Float) : 22.0000
+                Y (Float) : 22.0000
+                Z (Float) : 1.0000
+                W (Float) : 2.0000
+    CMaterialParameterTexture #6 (CMaterialParameterTexture) : NoiseTextureMask
+        CMaterialParameterTexture (CMaterialParameterTexture)
+            parameterName (CName) : NoiseTextureMask
+            texture (handle:ITexture) : fx/textures/noise/perlin_noise_tileable.xbm
+    CMaterialParameterVector #7 (CMaterialParameterVector) : NoiseFlowMapUV
+        CMaterialParameterVector (CMaterialParameterVector)
+            parameterName (CName) : NoiseFlowMapUV
+            vector (Vector)
+                X (Float) : 4.0000
+                Y (Float) : 1.0000
+                Z (Float) : 1.0000
+                W (Float) : 2.0000
+    CMaterialParameterVector #8 (CMaterialParameterVector) : NoiseFlowMapMovement
+        CMaterialParameterVector (CMaterialParameterVector)
+            parameterName (CName) : NoiseFlowMapMovement
+            vector (Vector)
+                X (Float) : -0.0070
+                Y (Float) : 0.0030
                 Z (Float) : 0.0000
                 W (Float) : 0.0000
-    CMaterialParameterVector #3 (CMaterialParameterVector) : CoarseDirection
+    CMaterialParameterTexture #9 (CMaterialParameterTexture) : NoiseTexture
+        CMaterialParameterTexture (CMaterialParameterTexture)
+            parameterName (CName) : NoiseTexture
+            texture (handle:ITexture) : engine/textures/bluenoisetexture.xbm
+    CMaterialParameterTexture #10 (CMaterialParameterTexture) : NoiseFlowMap
+        CMaterialParameterTexture (CMaterialParameterTexture)
+            parameterName (CName) : NoiseFlowMap
+            texture (handle:ITexture) : fx/textures/other/fx_flowmap.xbm
+    CMaterialParameterVector #11 (CMaterialParameterVector) : CoarseDirection
         CMaterialParameterVector (CMaterialParameterVector)
             parameterName (CName) : CoarseDirection
             vector (Vector)
@@ -52,6 +136,11 @@
                 Y (Float) : 0.0000
                 Z (Float) : 0.0000
                 W (Float) : 0.0000
-    CMaterialParameterScalar #4 (CMaterialParameterScalar) : flowNormalStrength
-        CMaterialParameterScalar (CMaterialParameterScalar)
-            parameterName (CName) : flowNormalStrength
+    CMaterialParameterVector #12 (CMaterialParameterVector) : DetailDirection
+        CMaterialParameterVector (CMaterialParameterVector)
+            parameterName (CName) : DetailDirection
+            vector (Vector)
+                X (Float) : -0.0350
+                Y (Float) : 0.0000
+                Z (Float) : 0.0000
+                W (Float) : 0.0000
