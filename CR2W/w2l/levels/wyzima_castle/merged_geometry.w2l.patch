 1 file changed, 67 insertions(+), 121 deletions(-)

diff --git 1.32/levels/wyzima_castle/merged_geometry.w2l.txt 4.00/levels/wyzima_castle/merged_geometry.w2l.txt
index 78e4e06..e93dc34 100644
--- 1.32/levels/wyzima_castle/merged_geometry.w2l.txt
+++ 4.00/levels/wyzima_castle/merged_geometry.w2l.txt
@@ -10,39 +10,32 @@
                 6 (ptr:CEntity) : CMergedWorldGeometryEntity #7
     CMergedWorldGeometryEntity #1 (CMergedWorldGeometryEntity) : 
         CMergedWorldGeometryEntity (CMergedWorldGeometryEntity)
-            transform (EngineTransform)
-                X (Float) : 792.0000
-                Y (Float) : -232.0000
-                Z (Float) : -0.0015
-            guid (CGUID) : b304e921-4721-4de3-9274-60fbe2bc7877
+            guid (CGUID) : fc57afb4-9034-4151-9dd9-60fd807c1bae
             AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
             AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
             streamingDataBuffer (SharedDataBuffer)
-                Bufferdata (CByteArray) : 1060 bytes
-                CMergedShadowMeshComponent #0 (CMergedShadowMeshComponent) : shadow_mesh
-                    CMergedShadowMeshComponent (CMergedShadowMeshComponent)
-                        guid (CGUID) : 777c51e0-1f82-4743-b134-7c707297d86e
+                Bufferdata (CByteArray) : 948 bytes
+                CMergedMeshComponent #0 (CMergedMeshComponent) : shadow_mesh
+                    CMergedMeshComponent (CMergedMeshComponent)
+                        guid (CGUID) : 0d152f4a-dfe1-4ea1-996e-699f7c987466
                         AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
                         AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
                         name (String) : "shadow_mesh"
                         boundingBox (Box)
                             Min (Vector)
-                                X (Float) : 761.4070
-                                Y (Float) : -223.8857
-                                Z (Float) : 12.1583
+                                X (Float) : -0.5000
+                                Y (Float) : -0.5000
+                                Z (Float) : -0.5000
                                 W (Float) : 1.0000
                             Max (Vector)
-                                X (Float) : 762.4070
-                                Y (Float) : -222.8857
-                                Z (Float) : 13.1583
+                                X (Float) : 0.5000
+                                Y (Float) : 0.5000
+                                Z (Float) : 0.5000
                                 W (Float) : 1.0000
                         drawableFlags (EDrawableFlags) : DF_CastShadows,DF_CastShadowsWhenNotVisible
-                        mesh (handle:CMesh) : merged_content/wyzima_castle/shadow_mesh_40x24.w2mesh
                         objects (array:GlobalVisID)
                             0 (GlobalVisID) : <GlobalVisID>0
-                        renderMask (Uint8) : 28
                         streamingDistance (Float) : 240.0000
-                    unknownBytes (CBytes) : 64 bytes
             streamingDistance (Uint8) : 30
             Components (array:ptr:CComponent) : # array:ptr:CComponent
             BufferV1 (CCompressedBuffer:SEntityBufferType1)
@@ -69,24 +62,24 @@
     CMergedWorldGeometryEntity #2 (CMergedWorldGeometryEntity) : 
         CMergedWorldGeometryEntity (CMergedWorldGeometryEntity)
             transform (EngineTransform)
-                X (Float) : -40.0000
-                Y (Float) : -40.0000
-                Z (Float) : 10.9146
-            guid (CGUID) : 24b946b4-329e-4498-a77b-4a1534087b4f
+                X (Float) : -29.2471
+                Y (Float) : -14.3394
+                Z (Float) : 21.5937
+            guid (CGUID) : 38535efa-22fe-4e78-b409-f30d1aadc3d4
             AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
             AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
             streamingDataBuffer (SharedDataBuffer)
-                Bufferdata (CByteArray) : 3084 bytes
-                CMergedShadowMeshComponent #0 (CMergedShadowMeshComponent) : shadow_mesh
-                    CMergedShadowMeshComponent (CMergedShadowMeshComponent)
-                        guid (CGUID) : 3485bc3c-39c6-450a-a687-2d8b39b5662f
+                Bufferdata (CByteArray) : 2972 bytes
+                CMergedMeshComponent #0 (CMergedMeshComponent) : shadow_mesh
+                    CMergedMeshComponent (CMergedMeshComponent)
+                        guid (CGUID) : e1455fca-9e10-4730-a1f0-f148bb5d06b1
                         AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
                         AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
                         name (String) : "shadow_mesh"
                         boundingBox (Box)
                             Min (Vector)
                                 X (Float) : -51.7840
-                                Y (Float) : -25.8357
+                                Y (Float) : -22.4090
                                 Z (Float) : 8.6583
                                 W (Float) : 1.0000
                             Max (Vector)
@@ -95,7 +88,6 @@
                                 Z (Float) : 34.5268
                                 W (Float) : 1.0000
                         drawableFlags (EDrawableFlags) : DF_CastShadows,DF_CastShadowsWhenNotVisible
-                        mesh (handle:CMesh) : merged_content/wyzima_castle/shadow_mesh_27x27.w2mesh
                         objects (array:GlobalVisID)
                             0 (GlobalVisID) : <GlobalVisID>0
                             1 (GlobalVisID) : <GlobalVisID>1
@@ -351,9 +343,7 @@
                             251 (GlobalVisID) : <GlobalVisID>251
                             252 (GlobalVisID) : <GlobalVisID>252
                             253 (GlobalVisID) : <GlobalVisID>253
-                        renderMask (Uint8) : 28
                         streamingDistance (Float) : 240.0000
-                    unknownBytes (CBytes) : 64 bytes
             streamingDistance (Uint8) : 30
             Components (array:ptr:CComponent) : # array:ptr:CComponent
             BufferV1 (CCompressedBuffer:SEntityBufferType1)
@@ -374,23 +364,23 @@
             gridCoordinates (CMergedWorldGeometryGridCoordinates)
                 x (Int16) : 27
                 y (Int16) : 27
-            statsDataSize (Uint32) : 687624
-            statsNumTriangles (Uint32) : 61860
-            statsNumVertices (Uint32) : 39558
+            statsDataSize (Uint32) : 643328
+            statsNumTriangles (Uint32) : 58132
+            statsNumVertices (Uint32) : 36817
     CMergedWorldGeometryEntity #3 (CMergedWorldGeometryEntity) : 
         CMergedWorldGeometryEntity (CMergedWorldGeometryEntity)
             transform (EngineTransform)
-                X (Float) : 24.0000
-                Y (Float) : -40.0000
-                Z (Float) : 9.9417
-            guid (CGUID) : 1c926b8d-e23f-40d7-9734-ee18b6039589
+                X (Float) : 8.5302
+                Y (Float) : -7.8036
+                Z (Float) : 24.0386
+            guid (CGUID) : c4394967-8662-43d8-b62c-ac82ba909508
             AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
             AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
             streamingDataBuffer (SharedDataBuffer)
-                Bufferdata (CByteArray) : 2204 bytes
-                CMergedShadowMeshComponent #0 (CMergedShadowMeshComponent) : shadow_mesh
-                    CMergedShadowMeshComponent (CMergedShadowMeshComponent)
-                        guid (CGUID) : e8c03251-f3ce-43b3-9e3d-b0f6ce2274e6
+                Bufferdata (CByteArray) : 2084 bytes
+                CMergedMeshComponent #0 (CMergedMeshComponent) : shadow_mesh
+                    CMergedMeshComponent (CMergedMeshComponent)
+                        guid (CGUID) : 0ec6a748-3f01-4551-b206-a0596faa28eb
                         AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
                         AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
                         name (String) : "shadow_mesh"
@@ -402,11 +392,10 @@
                                 W (Float) : 1.0000
                             Max (Vector)
                                 X (Float) : 24.7634
-                                Y (Float) : 9.5995
+                                Y (Float) : 9.5994
                                 Z (Float) : 39.4183
                                 W (Float) : 1.0000
                         drawableFlags (EDrawableFlags) : DF_CastShadows,DF_CastShadowsWhenNotVisible
-                        mesh (handle:CMesh) : merged_content/wyzima_castle/shadow_mesh_28x27.w2mesh
                         objects (array:GlobalVisID)
                             0 (GlobalVisID) : <GlobalVisID>0
                             1 (GlobalVisID) : <GlobalVisID>1
@@ -551,10 +540,7 @@
                             140 (GlobalVisID) : <GlobalVisID>140
                             141 (GlobalVisID) : <GlobalVisID>141
                             142 (GlobalVisID) : <GlobalVisID>142
-                            143 (GlobalVisID) : <GlobalVisID>143
-                        renderMask (Uint8) : 28
                         streamingDistance (Float) : 240.0000
-                    unknownBytes (CBytes) : 64 bytes
             streamingDistance (Uint8) : 30
             Components (array:ptr:CComponent) : # array:ptr:CComponent
             BufferV1 (CCompressedBuffer:SEntityBufferType1)
@@ -575,23 +561,23 @@
             gridCoordinates (CMergedWorldGeometryGridCoordinates)
                 x (Int16) : 28
                 y (Int16) : 27
-            statsDataSize (Uint32) : 429742
-            statsNumTriangles (Uint32) : 38993
-            statsNumVertices (Uint32) : 24473
+            statsDataSize (Uint32) : 425724
+            statsNumTriangles (Uint32) : 38674
+            statsNumVertices (Uint32) : 24210
     CMergedWorldGeometryEntity #4 (CMergedWorldGeometryEntity) : 
         CMergedWorldGeometryEntity (CMergedWorldGeometryEntity)
             transform (EngineTransform)
-                X (Float) : -104.0000
-                Y (Float) : 24.0000
-                Z (Float) : 24.6759
-            guid (CGUID) : b0ee3b74-5a3f-443f-9cdc-d5aeec36983e
+                X (Float) : -112.0108
+                Y (Float) : 2.8555
+                Z (Float) : -0.7362
+            guid (CGUID) : 5d25f9d3-8a19-4d83-afa2-fcdfa85c3ada
             AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
             AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
             streamingDataBuffer (SharedDataBuffer)
-                Bufferdata (CByteArray) : 1060 bytes
-                CMergedShadowMeshComponent #0 (CMergedShadowMeshComponent) : shadow_mesh
-                    CMergedShadowMeshComponent (CMergedShadowMeshComponent)
-                        guid (CGUID) : 423d3834-d34d-4db4-a6d1-2304df6360a0
+                Bufferdata (CByteArray) : 948 bytes
+                CMergedMeshComponent #0 (CMergedMeshComponent) : shadow_mesh
+                    CMergedMeshComponent (CMergedMeshComponent)
+                        guid (CGUID) : bb8bcd1a-f31b-4a9d-9b57-ffa9b578740c
                         AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
                         AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
                         name (String) : "shadow_mesh"
@@ -607,12 +593,9 @@
                                 Z (Float) : -0.5768
                                 W (Float) : 1.0000
                         drawableFlags (EDrawableFlags) : DF_CastShadows,DF_CastShadowsWhenNotVisible
-                        mesh (handle:CMesh) : merged_content/wyzima_castle/shadow_mesh_26x28.w2mesh
                         objects (array:GlobalVisID)
                             0 (GlobalVisID) : <GlobalVisID>0
-                        renderMask (Uint8) : 28
                         streamingDistance (Float) : 240.0000
-                    unknownBytes (CBytes) : 64 bytes
             streamingDistance (Uint8) : 30
             Components (array:ptr:CComponent) : # array:ptr:CComponent
             BufferV1 (CCompressedBuffer:SEntityBufferType1)
@@ -639,17 +622,17 @@
     CMergedWorldGeometryEntity #5 (CMergedWorldGeometryEntity) : 
         CMergedWorldGeometryEntity (CMergedWorldGeometryEntity)
             transform (EngineTransform)
-                X (Float) : -40.0000
-                Y (Float) : 24.0000
-                Z (Float) : 10.8587
-            guid (CGUID) : b5752720-2efd-4108-825c-7e53147b89bd
+                X (Float) : -28.2631
+                Y (Float) : 11.5405
+                Z (Float) : 22.1508
+            guid (CGUID) : 7ed9c556-50ca-4947-88a3-77d2192a9b6a
             AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
             AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
             streamingDataBuffer (SharedDataBuffer)
-                Bufferdata (CByteArray) : 5604 bytes
-                CMergedShadowMeshComponent #0 (CMergedShadowMeshComponent) : shadow_mesh
-                    CMergedShadowMeshComponent (CMergedShadowMeshComponent)
-                        guid (CGUID) : 0952e189-564b-477d-81cb-9a6e842bd7eb
+                Bufferdata (CByteArray) : 5492 bytes
+                CMergedMeshComponent #0 (CMergedMeshComponent) : shadow_mesh
+                    CMergedMeshComponent (CMergedMeshComponent)
+                        guid (CGUID) : 6d7576c8-93e7-4b27-8702-cc69b6606f64
                         AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
                         AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
                         name (String) : "shadow_mesh"
@@ -665,7 +648,6 @@
                                 Z (Float) : 35.6433
                                 W (Float) : 1.0000
                         drawableFlags (EDrawableFlags) : DF_CastShadows,DF_CastShadowsWhenNotVisible
-                        mesh (handle:CMesh) : merged_content/wyzima_castle/shadow_mesh_27x28.w2mesh
                         objects (array:GlobalVisID)
                             0 (GlobalVisID) : <GlobalVisID>0
                             1 (GlobalVisID) : <GlobalVisID>1
@@ -1236,9 +1218,7 @@
                             566 (GlobalVisID) : <GlobalVisID>566
                             567 (GlobalVisID) : <GlobalVisID>567
                             568 (GlobalVisID) : <GlobalVisID>568
-                        renderMask (Uint8) : 28
                         streamingDistance (Float) : 240.0000
-                    unknownBytes (CBytes) : 64 bytes
             streamingDistance (Uint8) : 30
             Components (array:ptr:CComponent) : # array:ptr:CComponent
             BufferV1 (CCompressedBuffer:SEntityBufferType1)
@@ -1259,23 +1239,23 @@
             gridCoordinates (CMergedWorldGeometryGridCoordinates)
                 x (Int16) : 27
                 y (Int16) : 28
-            statsDataSize (Uint32) : 2023806
-            statsNumTriangles (Uint32) : 185473
-            statsNumVertices (Uint32) : 113871
+            statsDataSize (Uint32) : 1959726
+            statsNumTriangles (Uint32) : 180317
+            statsNumVertices (Uint32) : 109728
     CMergedWorldGeometryEntity #6 (CMergedWorldGeometryEntity) : 
         CMergedWorldGeometryEntity (CMergedWorldGeometryEntity)
             transform (EngineTransform)
-                X (Float) : 24.0000
-                Y (Float) : 24.0000
-                Z (Float) : 9.9426
-            guid (CGUID) : 32d6cb0a-7e41-4ab0-9015-d9991e865c18
+                X (Float) : -0.9506
+                Y (Float) : 12.6598
+                Z (Float) : 24.9991
+            guid (CGUID) : d8713127-38b4-4faf-8d28-69f7edb7681b
             AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
             AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
             streamingDataBuffer (SharedDataBuffer)
-                Bufferdata (CByteArray) : 8572 bytes
-                CMergedShadowMeshComponent #0 (CMergedShadowMeshComponent) : shadow_mesh
-                    CMergedShadowMeshComponent (CMergedShadowMeshComponent)
-                        guid (CGUID) : 7dce2327-9b94-455d-89d6-ccd1842990c1
+                Bufferdata (CByteArray) : 8444 bytes
+                CMergedMeshComponent #0 (CMergedMeshComponent) : shadow_mesh
+                    CMergedMeshComponent (CMergedMeshComponent)
+                        guid (CGUID) : b0fceb09-97d5-4de3-bd86-db9551d32628
                         AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
                         AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
                         name (String) : "shadow_mesh"
@@ -1291,7 +1271,6 @@
                                 Z (Float) : 49.2620
                                 W (Float) : 1.0000
                         drawableFlags (EDrawableFlags) : DF_CastShadows,DF_CastShadowsWhenNotVisible
-                        mesh (handle:CMesh) : merged_content/wyzima_castle/shadow_mesh_28x28.w2mesh
                         objects (array:GlobalVisID)
                             0 (GlobalVisID) : <GlobalVisID>0
                             1 (GlobalVisID) : <GlobalVisID>1
@@ -2231,11 +2210,7 @@
                             935 (GlobalVisID) : <GlobalVisID>935
                             936 (GlobalVisID) : <GlobalVisID>936
                             937 (GlobalVisID) : <GlobalVisID>937
-                            938 (GlobalVisID) : <GlobalVisID>938
-                            939 (GlobalVisID) : <GlobalVisID>939
-                        renderMask (Uint8) : 28
                         streamingDistance (Float) : 240.0000
-                    unknownBytes (CBytes) : 64 bytes
             streamingDistance (Uint8) : 30
             Components (array:ptr:CComponent) : # array:ptr:CComponent
             BufferV1 (CCompressedBuffer:SEntityBufferType1)
@@ -2256,45 +2231,19 @@
             gridCoordinates (CMergedWorldGeometryGridCoordinates)
                 x (Int16) : 28
                 y (Int16) : 28
-            statsDataSize (Uint32) : 3886450
-            statsNumTriangles (Uint32) : 358099
-            statsNumVertices (Uint32) : 217232
+            statsDataSize (Uint32) : 4097760
+            statsNumTriangles (Uint32) : 375956
+            statsNumVertices (Uint32) : 230253
     CMergedWorldGeometryEntity #7 (CMergedWorldGeometryEntity) : 
         CMergedWorldGeometryEntity (CMergedWorldGeometryEntity)
             transform (EngineTransform)
                 X (Float) : 24.0000
                 Y (Float) : 88.0000
                 Z (Float) : 10.9146
-            guid (CGUID) : d270aacf-2371-4aa5-b25b-b436610e6311
+            guid (CGUID) : 055efeb8-72fd-4616-979c-88ac2d669f60
             AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
             AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
-            streamingDataBuffer (SharedDataBuffer)
-                Bufferdata (CByteArray) : 1060 bytes
-                CMergedShadowMeshComponent #0 (CMergedShadowMeshComponent) : shadow_mesh
-                    CMergedShadowMeshComponent (CMergedShadowMeshComponent)
-                        guid (CGUID) : 8539b766-5e61-467c-8cd9-0fcc33d1eba4
-                        AttachmentsReference (array:handle:IAttachment) : # array:handle:IAttachment
-                        AttachmentsChild (array:handle:IAttachment) : # array:handle:IAttachment
-                        name (String) : "shadow_mesh"
-                        boundingBox (Box)
-                            Min (Vector)
-                                X (Float) : -5.4775
-                                Y (Float) : 55.9860
-                                Z (Float) : 11.7633
-                                W (Float) : 1.0000
-                            Max (Vector)
-                                X (Float) : -3.8298
-                                Y (Float) : 56.2708
-                                Z (Float) : 15.3076
-                                W (Float) : 1.0000
-                        drawableFlags (EDrawableFlags) : DF_CastShadows,DF_CastShadowsWhenNotVisible
-                        mesh (handle:CMesh) : merged_content/wyzima_castle/shadow_mesh_28x29.w2mesh
-                        objects (array:GlobalVisID)
-                            0 (GlobalVisID) : <GlobalVisID>0
-                        renderMask (Uint8) : 28
-                        streamingDistance (Float) : 240.0000
-                    unknownBytes (CBytes) : 64 bytes
-            streamingDistance (Uint8) : 30
+            streamingDistance (Uint8) : 0
             Components (array:ptr:CComponent) : # array:ptr:CComponent
             BufferV1 (CCompressedBuffer:SEntityBufferType1)
                 0 (SEntityBufferType1)
@@ -2314,6 +2263,3 @@
             gridCoordinates (CMergedWorldGeometryGridCoordinates)
                 x (Int16) : 28
                 y (Int16) : 29
-            statsDataSize (Uint32) : 1308
-            statsNumTriangles (Uint32) : 134
-            statsNumVertices (Uint32) : 63
